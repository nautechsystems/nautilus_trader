from datetime import datetime
from typing import Any

from nautilus_trader.cache.config import CacheConfig
from stubs.accounting.accounts.base import Account
from stubs.cache.facade import CacheDatabaseFacade
from stubs.common.actor import Actor
from stubs.core.uuid import UUID4
from stubs.model.identifiers import AccountId
from stubs.model.identifiers import ClientId
from stubs.model.identifiers import ClientOrderId
from stubs.model.identifiers import ComponentId
from stubs.model.identifiers import InstrumentId
from stubs.model.identifiers import PositionId
from stubs.model.identifiers import StrategyId
from stubs.model.identifiers import TraderId
from stubs.model.identifiers import VenueOrderId
from stubs.model.instruments.base import Instrument
from stubs.model.instruments.synthetic import SyntheticInstrument
from stubs.model.objects import Currency
from stubs.model.objects import Money
from stubs.model.orders.base import Order
from stubs.model.position import Position
from stubs.serialization.base import Serializer
from stubs.trading.strategy import Strategy

class CacheDatabaseAdapter(CacheDatabaseFacade):

    def __init__(
        self,
        trader_id: TraderId,
        instance_id: UUID4,
        serializer: Serializer,
        config: CacheConfig | None = None,
    ) -> None: ...
    def close(self) -> None: ...
    def flush(self) -> None: ...
    def keys(self, pattern: str = "*") -> list[str]: ...
    def load_all(self) -> dict[str, dict]: ...
    def load(self) -> dict[str, bytes]: ...
    def load_currencies(self) -> dict[str, Currency]: ...
    def load_instruments(self) -> dict[InstrumentId, Instrument]: ...
    def load_synthetics(self) -> dict[InstrumentId, SyntheticInstrument]: ...
    def load_accounts(self) -> dict[AccountId, Account]: ...
    def load_orders(self) -> dict[ClientOrderId, Order]: ...
    def load_positions(self) -> dict[PositionId, Position]: ...
    def load_index_order_position(self) -> dict[ClientOrderId, PositionId]: ...
    def load_index_order_client(self) -> dict[ClientOrderId, ClientId]: ...
    def load_currency(self, code: str) -> Currency | None: ...
    def load_instrument(self, instrument_id: InstrumentId) -> Instrument | None: ...
    def load_synthetic(self, instrument_id: InstrumentId) -> SyntheticInstrument | None: ...
    def load_account(self, account_id: AccountId) -> Account | None: ...
    def load_order(self, client_order_id: ClientOrderId) -> Order | None: ...
    def load_position(self, position_id: PositionId) -> Position | None: ...
    def load_actor(self, component_id: ComponentId) -> dict[str, Any]: ...
    def delete_actor(self, component_id: ComponentId) -> None: ...
    def load_strategy(self, strategy_id: StrategyId) -> dict[str, bytes]: ...
    def delete_strategy(self, strategy_id: StrategyId) -> None: ...
    def delete_order(self, client_order_id: ClientOrderId) -> None: ...
    def delete_position(self, position_id: PositionId) -> None: ...
    def delete_account_event(self, account_id: AccountId, event_id: str) -> None: ...
    def add(self, key: str, value: bytes) -> None: ...
    def add_currency(self, currency: Currency) -> None: ...
    def add_instrument(self, instrument: Instrument) -> None: ...
    def add_synthetic(self, synthetic: SyntheticInstrument) -> None: ...
    def add_account(self, account: Account) -> None: ...
    def add_order(self, order: Order, position_id: PositionId | None = None, client_id: ClientId | None = None) -> None: ...
    def add_position(self, position: Position) -> None: ...
    def index_venue_order_id(self, client_order_id: ClientOrderId, venue_order_id: VenueOrderId) -> None: ...
    def index_order_position(self, client_order_id: ClientOrderId, position_id: PositionId) -> None: ...
    def update_actor(self, actor: Actor) -> None: ...
    def update_strategy(self, strategy: Strategy) -> None: ...
    def update_account(self, account: Account) -> None: ...
    def update_order(self, order: Order) -> None: ...
    def update_position(self, position: Position) -> None: ...
    def snapshot_order_state(self, order: Order) -> None: ...
    def snapshot_position_state(
        self,
        position: Position,
        ts_snapshot: int,
        unrealized_pnl: Money | None = None,
    ) -> None: ...
    def heartbeat(self, timestamp: datetime) -> None: ...
